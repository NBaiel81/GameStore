<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bundle Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
        .navbar { display: flex; justify-content: space-between; align-items: center; padding: 10px 20px; background: #f8f8f8; border-bottom: 1px solid #ddd; }
        .navbar img { height: 40px; }
        .navbar .icons { display: flex; gap: 15px; }
        .container { padding: 20px; }
        .header { display: flex; align-items: center; gap: 20px; margin-bottom: 20px; }
        .header img { width: 200px; height: 200px; object-fit: cover; }
        .header-info h1 { font-size: 28px; margin-bottom: 10px; }
        .header-info p { margin: 5px 0; }
        .price-tiers { margin: 20px 0; }
        .price-tiers label { display: block; margin: 10px 0; }
        .price-tiers input[type="radio"] { margin-right: 10px; }
        .games-list { margin: 20px 0; }
        .games-list ul { list-style: none; padding: 0; }
        .games-list li { padding: 10px; border-bottom: 1px solid #ddd; }
        .section { margin: 20px 0; }
        .section h2 { font-size: 20px; margin-bottom: 10px; }
        .comments .comment { margin: 10px 0; padding: 10px; border: 1px solid #ddd; }
        .actions { display: flex; gap: 10px; margin: 20px 0; }
        .actions button { padding: 10px 20px; cursor: pointer; }
        .wishlist-btn.active { color: gold; }
    </style>
</head>
<body>
    <div class="navbar">
        <a href="index.html">
            <img src="logo.png" alt="Logo">
        </a>
        <div class="icons">
            <span>üîç</span>
            <span>üîî</span>
            <span>üë§</span>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <img id="bundle-image" src="" alt="Bundle Image">
            <div class="header-info">
                <h1 id="bundle-name"></h1>
                <p>Platform: <span id="bundle-platform"></span></p>
                <p>Rating: <span id="bundle-rating"></span></p>
                <p>Steam Review: <span id="bundle-steam-review"></span>%</p>
                <p id="bundle-discount"></p>
                <p id="bundle-timer"></p>
            </div>
        </div>

        <div class="price-tiers">
            <h2>Choose Your Tier</h2>
            <div id="tiers"></div>
        </div>

        <div class="games-list">
            <h2>Games Included</h2>
            <ul id="games-included"></ul>
        </div>

        <div class="actions">
            <button id="add-to-cart">Add to Cart</button>
            <button id="wishlist-btn" class="wishlist-btn">Add to Wishlist</button>
            <button id="share-btn">Share Bundle</button>
        </div>

        <div class="section">
            <h2>Bundle Info</h2>
            <p id="bundle-description"></p>
            <p>Community Review: <span id="bundle-community-review"></span></p>
        </div>

        <div class="section">
            <h2>Comments</h2>
            <div class="comments" id="bundle-comments"></div>
        </div>
    </div>

    <script type="module">
        import { data } from './data.js';

        const urlParams = new URLSearchParams(window.location.search);
        const bundleId = urlParams.get('id') || 'bundle1'; // Default to first bundle if no ID
        const bundle = data.bundles.find(b => b.id === bundleId);

        if (!bundle) {
            document.querySelector('.container').innerHTML = '<p>Bundle not found.</p>';
        } else {
            // Populate bundle details
            document.getElementById('bundle-image').src = bundle.images[0];
            document.getElementById('bundle-name').textContent = bundle.name;
            document.getElementById('bundle-platform').textContent = bundle.platform;
            document.getElementById('bundle-rating').textContent = '‚òÖ'.repeat(Math.round(bundle.rating)) + '‚òÜ'.repeat(5 - Math.round(bundle.rating));
            document.getElementById('bundle-steam-review').textContent = bundle.steamReview;
            document.getElementById('bundle-description').textContent = bundle.description;
            document.getElementById('bundle-community-review').textContent = bundle.communityReview;
            document.getElementById('bundle-discount').textContent = `Discount: ${bundle.discount}%`;
            if (bundle.timer) {
                const endTime = new Date(bundle.discountTime);
                const now = new Date('2025-06-02T06:33:00-05:00');
                const timeLeft = endTime - now;
                if (timeLeft > 0) {
                    const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    document.getElementById('bundle-timer').textContent = `Time Left: ${days}d ${hours}h`;
                }
            }

            // Populate comments
            const commentsDiv = document.getElementById('bundle-comments');
            bundle.userReviews.forEach(review => {
                const comment = document.createElement('div');
                comment.className = 'comment';
                comment.innerHTML = `<p><strong>${review.user}</strong>: ${'‚òÖ'.repeat(review.stars)}${'‚òÜ'.repeat(5 - review.stars)}</p><p>${review.text}</p>`;
                commentsDiv.appendChild(comment);
            });

            // Populate price tiers
            const tiersDiv = document.getElementById('tiers');
            bundle.tiers.forEach((tier, index) => {
                const label = document.createElement('label');
                label.innerHTML = `<input type="radio" name="tier" value="${index}" ${index === 0 ? 'checked' : ''}> $${tier.price} - ${tier.gamesIncluded.length} games`;
                tiersDiv.appendChild(label);
            });

            // Update games list based on selected tier
            function updateGamesList() {
                const selectedTierIndex = parseInt(document.querySelector('input[name="tier"]:checked').value);
                const gamesList = document.getElementById('games-included');
                gamesList.innerHTML = '';
                bundle.tiers[selectedTierIndex].gamesIncluded.forEach(game => {
                    const li = document.createElement('li');
                    li.textContent = game;
                    gamesList.appendChild(li);
                });
            }

            updateGamesList();
            document.querySelectorAll('input[name="tier"]').forEach(radio => {
                radio.addEventListener('change', updateGamesList);
            });

            // Wishlist button toggle (visual only)
            const wishlistBtn = document.getElementById('wishlist-btn');
            wishlistBtn.classList.toggle('active', bundle.wishlist);
            wishlistBtn.addEventListener('click', () => {
                wishlistBtn.classList.toggle('active');
            });

            // Add to cart and share (visual only)
            document.getElementById('add-to-cart').addEventListener('click', () => {
                alert('Added to cart!');
            });
            document.getElementById('share-btn').addEventListener('click', () => {
                alert('Share link copied!');
            });
        }
    </script>
</body>
</html>